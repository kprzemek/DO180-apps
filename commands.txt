Chapter 1-5:
------------
podman run --name mysql-basic  -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 -d registry.redhat.io/rhel8/mysql-80:1 

CREATE TABLE Projects (id int NOT NULL, name varchar(255) DEFAULT NULL, code varchar(255) DEFAULT NULL, PRIMARY KEY (id));

INSERT into Projects (id, name, code) values (1,'DevOps','DO180');

podman run --name persist-db -d -v /home/student/dbfiles:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1

podman cp /home/student/DO180/labs/manage-lifecycle/db.sql mysql-basic:/
podman exec -it mysql-basic /bin/bash -c 'mysql -uuser1 -pmypa55 items </db.sql'

PODMAN:
=======
Binding do interace, zakres portow i protokol:
podman run -d --name port-bind2 -p 172.25.250.9:8180-8280:80-180/udp  quay.io/redhattraining/httpd-parent:latest

Jesli otwieramy 100 portow: od 8180-8280, to w kontenerze tez musi byc 100 portow: od 80 do 180!!!!!


Volumes:
========
unshare i SELinux z opcja :Z przy wolumenie dyskowym:
https://www.redhat.com/sysadmin/user-namespaces-selinux-rootless-containers
np: 
podman run --rm -v $HOME/mysql-data:/var/lib/mysql/data:Z -e MYSQL_USER=user -e MYSQL_PASSWORD=pass -e MYSQL_DATABASE=db -p 3306:3306 mariadb/server
----

podman unshare ls -ld mysqldb/items/

podman run --name persist-db -d -v /home/student/dbfiles:/var/lib/mysql/data -e MYSQL_USER=user1 -e MYSQL_PASSWORD=mypa55 -e MYSQL_DATABASE=items -e MYSQL_ROOT_PASSWORD=r00tpa55 registry.redhat.io/rhel8/mysql-80:1

podman cp /home/student/DO180/labs/manage-lifecycle/db.sql mysql-basic:/
podman exec -it mysql-basic /bin/bash -c 'mysql -uuser1 -pmypa55 items </db.sql'

TAGI:
=====
podman search mysql --list-tags --limit 5
podman search mysql --filter is-official=true
podman search mysql --filter stars=5000 -> https://hub.docker.com/search?q=mysql (ilosc gwiazdek)


curl -Ls https://quay.io/v2/redhattraining/httpd-parent/tags/list | python3 -m json.tool

curl -u='5883743|PrzemyslawKuznickiLP':'ey...dsferg' -Ls "https://sso.redhat.com/auth/realms/rhcc/protocol/redhat-docker-v2/auth?service=docker-registry" | python3 -m json.tool

curl -H "Authorization: Bearer wklejamy_access_token" -Ls https://registry.redhat.io/v2/rhel8/mysql-80/tags/list | python3 -m json.tool

oc new-app --image-stream php:7.3~https://github.com/kprzemek/DO180-apps --context-dir php-helloworld --name php-helloworld

Chapter 6:
----------
mysql -uuser1 -pmypa55 --protocol tcp -h localhost testdb </home/student/DO180/labs/manage-lifecycle/db.sql 
mysql -uuser1 -pmypa55 --protocol tcp -h localhost testdb -e 'select * from Projects;'
mysql -uuser1 -pmypa55 --protocol tcp -h localhost testdb (w srodku: drop table Projects; )

Chapter 9:
----------
oc new-app --name postgresql-persistent \
 --docker-image registry.redhat.io/rhel8/postgresql-13:1-7 \
 -e POSTGRESQL_USER=redhat \
 -e POSTGRESQL_PASSWORD=redhat123 \
 -e POSTGRESQL_DATABASE=persistentdb

oc set volumes deployment/postgresql-persistent \
 --add --name postgresql-storage --type pvc --claim-class nfs-storage \
 --claim-mode rwo --claim-size 10Gi --mount-path /var/lib/pgsql \
 --claim-name postgresql-storage

Chapter 10:
-----------
Certy sÄ… na maszynie UTILITY w /home/lab/ocp4/auth/kubeconfig
Cert kubeconfig lifetime:
  grep 'client-certificate-data' kubeconfig |awk '{print $2}' | base64 -d | openssl x509 -text

 oc adm policy add-cluster-role-to-user cluster-admin przem
 oc adm policy add-cluster-role-to-user cluster-admin admin
 oc get clusterrole
 oc describe clusterrole/admin
 oc describe clusterrole/view
 oc describe clusterrole/edit
 oc describe clusterrole/admin|grep configmaps
 oc describe clusterrole/view|grep configmaps
 oc get clusterrolebindings.
 oc get clusterrolebindings|less
 oc get clusterrolebindings -o wide|less
 oc get clusterrolebindings -o wide|grep self-provi
 oc describe clusterrole/self-provisioner
 oc get clusterrolebindings -o wide|grep admin
 oc get rolebindings 
 oc get rolebindings -o wide

Chapter 11:
-----------
oc create secret generic przem-secret --from-literal key1=SZKOLENIE --from-literal key2=DO285
oc set env deployment.apps/httpd --from secret/przem-secret --prefix PRZEM_
oc set volume deployment.apps/httpd --add --type secret --secret-name przem-secret --mount-path /przem-secrets

USUNIECIE ZMIENNYCH:
oc set env deployment.apps/httpd PRZEM_KEY1- PRZEM_KEY2-

USUNIECIE VOLUMENU:
oc set volume deployment.apps/httpd --name NAZWA_z_describe_deploumentu --remove

SCC:
oc get pod httpd-7457899db7-t9jmk -o yaml |oc adm policy scc-subject-review -f -
oc create serviceaccount przem-root
oc adm policy add-scc-to-user anyuid -z przem-root
oc set serviceaccount deployment.apps/httpd przem-root

Chapter 12:
-----------
selfSignet Certy dla route:
oc create route edge --service srv_name

Chapter 13:
-----------
oc label node master01 env=dev
oc patch deployment.apps/sample --patch '{"spec":{"template":{"spec":{"nodeSelector":{"env":"dev"}}}}}'
oc adm new-project demo --node-selector "env=dev"
oc annotate namespace demo openshift.io/node-selector="env=prod" --overwrite
oc scale --replicas 3 deployment.apps/sample

